/*! project_management_app 2016-03-14 */
function createProject(){sprintsArray=[],positionFilled=0,clientLogicFilled=!1,frontEndFilled=!1,serverLogicFilled=!1,frontEndScrum=randomFrontEndPoints(),clientsideScrum=randomClientPoints(),serverScrum=randomServerPoints(),$(".projectContainer").empty(),$(".projectContainer").append("<h1>"+randomCompanyGenerator()+"</h1>"),$(".projectContainer").append('<div class="project-points"></div>'),$(".project-points").append('<div class="frontend-points"></div>'),$(".project-points").append('<div class="clientside-points"></div>'),$(".project-points").append('<div class="serverside-points"></div>'),$(".frontend-points").append("<p>"+frontEndScrum+"</p>"),$(".frontend-points").append("<p>Front-End Scrum Points</p>"),$(".clientside-points").append("<p>"+clientsideScrum+"</p>"),$(".clientside-points").append("<p>Clientside Scrum Points</p>"),$(".serverside-points").append("<p>"+serverScrum+"</p>"),$(".serverside-points").append("<p>Serverside Scrum Points</p>"),$(".projectContainer").append('<button class=" btn-danger assignStaff">Assign Staff</button>'),$(".projectContainer").append('<div class="employees"></div>'),$(".generate").delay(2e3).slideUp(),$(".assignStaff").delay(1500).slideDown()}function randomFrontEndPoints(){return randomNumber(10,maxFrontEndPoints)}function randomClientPoints(){return randomNumber(10,maxClientPoints)}function randomServerPoints(){return randomNumber(10,maxServerPoints)}function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}function assignStaff(){$.ajax({type:"GET",url:"/staff",success:function(a){staff.name=a.name,staff.skill=a.skill,staff.sprint=a.sprint,matchSkills(staff)}}),$(".generate").delay(2e3).slideDown(),$(".assignStaff").delay(2e3).slideUp()}function matchSkills(a){if("Clientside Logic"==a.skill&&clientLogicFilled===!1&&($(".employees").append('<div class="clientside-container"></div>'),$(".clientside-container").append("<h2>"+a.name+"</h2>"),$(".clientside-container").append('<ul class="clientside metrics"></ul>'),$(".clientside-container ul").append('<li><span class="bold">Skill:</span> '+a.skill+"</li>"),$(".clientside-container ul").append('<li><span class="bold">Average Sprints:</span> '+a.sprint+"</li>"),$(".clientside-container ul").append('<li id="clientside-completion"><span class="bold">Sprints till completion:</span> '+Math.ceil(clientsideScrum/a.sprint)+"</li>"),$("#clientside-completion").data("sprints",Math.ceil(clientsideScrum/a.sprint)),sprintsArray.push($("#clientside-completion").data("sprints")),clientLogicFilled=!0,console.log(a.skill,"filled!"),positionFilled++),"Front End"==a.skill&&frontEndFilled===!1&&($(".employees").append('<div class="frontend-container"></div>'),$(".frontend-container").append("<h2>"+a.name+"</h2>"),$(".frontend-container").append('<ul class="frontend metrics"></ul>'),$(".frontend-container ul").append('<li><span class="bold">Skill:</span> '+a.skill+"</li>"),$(".frontend-container ul").append('<li><span class="bold">Average Sprints:</span> '+a.sprint+"</li>"),$(".frontend-container ul").append('<li id="frontend-completion"><span class="bold">Sprints till completion:</span> '+Math.ceil(frontEndScrum/a.sprint)+"</li>"),$("#frontend-completion").data("sprints",Math.ceil(frontEndScrum/a.sprint)),sprintsArray.push($("#frontend-completion").data("sprints")),frontEndFilled=!0,console.log(a.skill,"filled!"),positionFilled++),"Serverside Logic"==a.skill&&serverLogicFilled===!1&&($(".employees").append('<div class="serverside-container"></div>'),$(".serverside-container").append("<h2>"+a.name+"</h2>"),$(".serverside-container").append('<ul class="serverside metrics"></ul>'),$(".serverside-container ul").append('<li><span class="bold">Skill:</span> '+a.skill+"</li>"),$(".serverside-container ul").append('<li><span class="bold">Average Sprints:</span> '+a.sprint+"</li>"),$(".serverside-container ul").append('<li id="serverside-completion"><span class="bold">Sprints till completion:</span> '+Math.ceil(serverScrum/a.sprint)+"</li>"),$("#serverside-completion").data("sprints",Math.ceil(serverScrum/a.sprint)),sprintsArray.push($("#serverside-completion").data("sprints")),serverLogicFilled=!0,console.log(a.skill,"filled!"),positionFilled++),3>positionFilled&&(a={},assignStaff()),3==positionFilled){for(var b=0;b<sprintsArray.length;b++)totalSprints+=sprintsArray[b];$(".projectContainer").children(".assignStaff").after('<p class="sprints-to-completion">Sprints until completion: '+Math.max.apply(null,sprintsArray)+"</p>")}}var randomCompany=["Sub Prime Academy","The Nerdery","Code 42","Target","Rocket Fifty-Five","Brave New Media","Wells Fargo","3M"],staff={},maxFrontEndPoints=60,maxClientPoints=60,maxServerPoints=60,clientLogicFilled=!1,frontEndFilled=!1,serverLogicFilled=!1,positionFilled=0,frontEndScrum=0,clientsideScrum=0,serverScrum=0,sprintsArray=[],totalSprints=0;$(document).ready(function(){$(".container").prepend('<button class="generate btn-info">Generate Project</button>'),$(".container").on("click",".generate",createProject),$(".projectContainer").on("click","button",assignStaff)});var randomCompanyGenerator=function(){return randomCompany[randomNumber(0,randomCompany.length-1)]};